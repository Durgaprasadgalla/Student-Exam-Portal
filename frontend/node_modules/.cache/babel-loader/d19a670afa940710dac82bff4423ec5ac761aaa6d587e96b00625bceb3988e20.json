{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sridh\\\\Desktop\\\\new-exam-builder-ace-main\\\\frontend\\\\src\\\\Exam.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport \"./Exam.css\";\nimport { getQuestions, submitExam, getResult } from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Exam({\n  token\n}) {\n  _s();\n  const username = localStorage.getItem('username') || 'guest';\n  const prefix = `exam_${username}_`;\n  const KEY_START = `${prefix}start_time`;\n  const KEY_CURRENT = `${prefix}current_index`;\n  const KEY_ANSWERS = `${prefix}answers`;\n  const KEY_SUBMITTED = `${prefix}submitted`;\n  const EXAM_DURATION_MS = 30 * 60 * 1000; // 30 minutes\n\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState([]); // array of selected indices or null\n  const [current, setCurrent] = useState(() => {\n    const saved = parseInt(localStorage.getItem(KEY_CURRENT), 10);\n    return !isNaN(saved) && saved >= 0 ? saved : 0;\n  });\n  const [timeLeft, setTimeLeft] = useState(() => {\n    // We'll compute accurate remaining time from start_time on mount; start with fallback\n    return Math.floor(EXAM_DURATION_MS / 1000);\n  });\n  const [submitted, setSubmitted] = useState(() => localStorage.getItem(KEY_SUBMITTED) === 'true');\n  const [result, setResult] = useState(null);\n\n  // Helper: clear saved exam state\n  const clearSavedExam = () => {\n    localStorage.removeItem(KEY_START);\n    localStorage.removeItem(KEY_CURRENT);\n    localStorage.removeItem(KEY_ANSWERS);\n    localStorage.removeItem(KEY_SUBMITTED);\n  };\n\n  // Load questions and restore saved answers / current index and compute timeLeft from start_time\n  useEffect(() => {\n    let mounted = true;\n    const load = async () => {\n      // If already submitted (server), fetch result and bail out\n      try {\n        var _r$data;\n        const r = await getResult(token);\n        if (r !== null && r !== void 0 && (_r$data = r.data) !== null && _r$data !== void 0 && _r$data.review && mounted) {\n          setSubmitted(true);\n          setResult(r.data);\n          return;\n        }\n      } catch (err) {\n        // ignore â€” no previous result\n      }\n\n      // Ensure start_time exists\n      let start = localStorage.getItem(KEY_START);\n      if (!start) {\n        start = Date.now().toString();\n        localStorage.setItem(KEY_START, start);\n      }\n      const startMs = parseInt(start, 10);\n      const elapsed = Date.now() - startMs;\n      const remaining = Math.max(Math.floor((EXAM_DURATION_MS - elapsed) / 1000), 0);\n      if (mounted) setTimeLeft(remaining);\n\n      // fetch questions\n      try {\n        const res = await getQuestions(token);\n        if (!mounted) return;\n        const qs = (res === null || res === void 0 ? void 0 : res.data) || [];\n        setQuestions(qs);\n\n        // restore saved answers (if present) and adapt to length\n        let savedAnswers = null;\n        try {\n          savedAnswers = JSON.parse(localStorage.getItem(KEY_ANSWERS));\n        } catch (e) {\n          savedAnswers = null;\n        }\n        let answersToUse;\n        if (Array.isArray(savedAnswers)) {\n          if (savedAnswers.length === qs.length) answersToUse = savedAnswers;else if (savedAnswers.length < qs.length) answersToUse = [...savedAnswers, ...Array(qs.length - savedAnswers.length).fill(null)];else answersToUse = savedAnswers.slice(0, qs.length);\n        } else {\n          answersToUse = Array(qs.length).fill(null);\n        }\n        setAnswers(answersToUse);\n\n        // restore current index but ensure it's in bounds\n        const savedIndex = parseInt(localStorage.getItem(KEY_CURRENT), 10);\n        if (!isNaN(savedIndex) && savedIndex >= 0 && savedIndex < qs.length) {\n          setCurrent(savedIndex);\n        } else {\n          setCurrent(0);\n        }\n      } catch (err) {\n        console.error(\"Failed to load questions:\", err);\n      }\n    };\n    load();\n    return () => {\n      mounted = false;\n    };\n  }, [token]); // run once on mount / token change\n\n  // Persist answers and current index whenever they change\n  useEffect(() => {\n    try {\n      localStorage.setItem(KEY_ANSWERS, JSON.stringify(answers));\n    } catch (e) {/* ignore storage errors */}\n  }, [answers, KEY_ANSWERS]);\n  useEffect(() => {\n    localStorage.setItem(KEY_CURRENT, String(current));\n  }, [current, KEY_CURRENT]);\n\n  // Timer: compute remaining each second from start_time so refresh stays accurate\n  const handleAutoSubmit = useCallback(async () => {\n    // Double-check not already submitted\n    if (submitted) return;\n    try {\n      const payload = questions.map((q, i) => {\n        var _answers$i;\n        return {\n          questionId: q._id,\n          selectedOption: (_answers$i = answers[i]) !== null && _answers$i !== void 0 ? _answers$i : null\n        };\n      });\n      await submitExam(payload, token);\n      localStorage.setItem(KEY_SUBMITTED, 'true');\n      clearSavedExam();\n      setSubmitted(true);\n      const r = await getResult(token);\n      setResult(r.data);\n      // navigate to results page (optional)\n      window.location.hash = '#/results';\n    } catch (err) {\n      console.error(\"Auto-submit error:\", err);\n    }\n  }, [questions, answers, token, submitted, KEY_SUBMITTED]);\n  useEffect(() => {\n    if (!questions.length || submitted) return;\n    let mounted = true;\n    const tick = () => {\n      const startS = localStorage.getItem(KEY_START);\n      if (!startS) return;\n      const startMs = parseInt(startS, 10);\n      const elapsed = Date.now() - startMs;\n      const remaining = Math.max(Math.floor((EXAM_DURATION_MS - elapsed) / 1000), 0);\n      if (!mounted) return;\n      setTimeLeft(remaining);\n      if (remaining <= 0) {\n        handleAutoSubmit();\n      }\n    };\n    tick(); // run immediately\n    const id = setInterval(tick, 1000);\n    return () => {\n      mounted = false;\n      clearInterval(id);\n    };\n  }, [questions.length, submitted, handleAutoSubmit]);\n\n  // Option click\n  const handleOption = idx => {\n    const newAnswers = Array.from(answers);\n    newAnswers[current] = idx;\n    setAnswers(newAnswers);\n  };\n\n  // Manual submit\n  const handleSubmit = useCallback(async () => {\n    if (submitted) return;\n    try {\n      const payload = questions.map((q, i) => {\n        var _answers$i2;\n        return {\n          questionId: q._id,\n          selectedOption: (_answers$i2 = answers[i]) !== null && _answers$i2 !== void 0 ? _answers$i2 : null\n        };\n      });\n      await submitExam(payload, token);\n      localStorage.setItem(KEY_SUBMITTED, 'true');\n      clearSavedExam();\n      setSubmitted(true);\n      const r = await getResult(token);\n      setResult(r.data);\n      window.location.hash = '#/results';\n    } catch (err) {\n      console.error(\"Submit error:\", err);\n    }\n  }, [questions, answers, token, submitted]);\n\n  // If already submitted & we have result -> show result block\n  if (submitted && result) {\n    var _result$review, _result$review2, _result$review3;\n    const total = ((_result$review = result.review) === null || _result$review === void 0 ? void 0 : _result$review.length) || 0;\n    const correct = ((_result$review2 = result.review) === null || _result$review2 === void 0 ? void 0 : _result$review2.filter(q => q.correct === q.selected).length) || 0;\n    const wrong = total - correct;\n    const percent = total ? Math.round(correct / total * 100) : 0;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result-container card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Exam Submitted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '1.2em',\n          margin: '12px 0',\n          display: 'flex',\n          justifyContent: 'space-between',\n          maxWidth: 420\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Score:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 16\n          }, this), \" \", result.score, \" / \", total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Percentage:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 16\n          }, this), \" \", percent, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 20,\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#43cea2',\n            fontWeight: 'bold'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Correct:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 65\n          }, this), \" \", correct]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#d32f2f',\n            fontWeight: 'bold'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Wrong:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 65\n          }, this), \" \", wrong]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Submitted At: \", new Date(result.submittedAt).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 24\n        },\n        children: \"Review Your Answers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'left',\n          margin: '0 auto',\n          maxWidth: 700\n        },\n        children: (_result$review3 = result.review) === null || _result$review3 === void 0 ? void 0 : _result$review3.map((qItem, idx) => {\n          const isCorrect = qItem.correct === qItem.selected;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 24,\n              padding: 16,\n              borderRadius: 10,\n              background: '#f7f7fa',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.04)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 600,\n                marginBottom: 8\n              },\n              children: [idx + 1, \". \", qItem.question]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: isCorrect ? '#43cea2' : '#d32f2f',\n                  fontWeight: 600\n                },\n                children: isCorrect ? 'Correct' : 'Wrong'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                listStyle: 'none',\n                padding: 0\n              },\n              children: qItem.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                style: {\n                  padding: '8px 12px',\n                  margin: '6px 0',\n                  border: '2px solid',\n                  borderColor: qItem.correct === i ? '#43cea2' : qItem.selected === i ? '#d32f2f' : '#ccc',\n                  borderRadius: 6,\n                  backgroundColor: qItem.correct === i ? '#e8f5e9' : qItem.selected === i && qItem.correct !== i ? '#ffebee' : '#fff',\n                  fontWeight: qItem.correct === i || qItem.selected === i ? 600 : 400\n                },\n                children: [String.fromCharCode(65 + i), \". \", opt, qItem.correct === i ? ' (Correct)' : '', qItem.selected === i && qItem.correct !== i ? ' (Your answer)' : '']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.hash = '#/dashboard',\n        style: {\n          padding: '10px 16px',\n          background: '#43cea2',\n          color: '#fff',\n          border: 'none',\n          borderRadius: 6,\n          cursor: 'pointer'\n        },\n        children: \"Return to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Loading\n  if (!questions.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exam-container\",\n      style: {\n        textAlign: 'center',\n        padding: '60px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Loading questions...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: 12\n        },\n        children: \"Preparing your exam\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Render current exam question\n  const q = questions[current];\n  const minutes = Math.floor(timeLeft / 60);\n  const seconds = timeLeft % 60;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exam-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exam-timer\",\n      style: {\n        textAlign: 'right',\n        fontWeight: 600,\n        color: '#d32f2f',\n        marginBottom: 16,\n        fontSize: '1.2em'\n      },\n      children: [\"Time Left: \", minutes.toString().padStart(2, '0'), \":\", seconds.toString().padStart(2, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Question \", current + 1, \" of \", questions.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"question\",\n      style: {\n        marginBottom: 16\n      },\n      children: q.question\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyle: 'none',\n        padding: 0\n      },\n      children: q.options.map((opt, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleOption(idx),\n        style: {\n          padding: '10px 14px',\n          margin: '8px 0',\n          border: '2px solid',\n          borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\n          borderRadius: 8,\n          backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\n          cursor: 'pointer',\n          fontWeight: answers[current] === idx ? 700 : 500\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 800,\n            marginRight: 8\n          },\n          children: [String.fromCharCode(65 + idx), \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), \" \", opt]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 12,\n        marginTop: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: current === 0,\n        onClick: () => setCurrent(c => Math.max(0, c - 1)),\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: current === questions.length - 1,\n        onClick: () => setCurrent(c => Math.min(questions.length - 1, c + 1)),\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        style: {\n          marginLeft: 'auto',\n          background: '#1976d2',\n          color: '#fff',\n          border: 'none',\n          padding: '8px 12px',\n          borderRadius: 6\n        },\n        children: \"Submit Exam\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 5\n  }, this);\n}\n_s(Exam, \"5UmFAeRNTAT8FdX6feaV0ehOHeI=\");\n_c = Exam;\nexport default Exam;\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","getQuestions","submitExam","getResult","jsxDEV","_jsxDEV","Exam","token","_s","username","localStorage","getItem","prefix","KEY_START","KEY_CURRENT","KEY_ANSWERS","KEY_SUBMITTED","EXAM_DURATION_MS","questions","setQuestions","answers","setAnswers","current","setCurrent","saved","parseInt","isNaN","timeLeft","setTimeLeft","Math","floor","submitted","setSubmitted","result","setResult","clearSavedExam","removeItem","mounted","load","_r$data","r","data","review","err","start","Date","now","toString","setItem","startMs","elapsed","remaining","max","res","qs","savedAnswers","JSON","parse","e","answersToUse","Array","isArray","length","fill","slice","savedIndex","console","error","stringify","String","handleAutoSubmit","payload","map","q","i","_answers$i","questionId","_id","selectedOption","window","location","hash","tick","startS","id","setInterval","clearInterval","handleOption","idx","newAnswers","from","handleSubmit","_answers$i2","_result$review","_result$review2","_result$review3","total","correct","filter","selected","wrong","percent","round","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","margin","display","justifyContent","maxWidth","score","gap","marginBottom","color","fontWeight","submittedAt","toLocaleString","marginTop","textAlign","qItem","isCorrect","padding","borderRadius","background","boxShadow","question","listStyle","options","opt","border","borderColor","backgroundColor","fromCharCode","onClick","cursor","minutes","seconds","padStart","marginRight","disabled","c","min","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/Sridh/Desktop/new-exam-builder-ace-main/frontend/src/Exam.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport \"./Exam.css\";\r\nimport { getQuestions, submitExam, getResult } from './api';\r\n\r\nfunction Exam({ token }) {\r\n  const username = localStorage.getItem('username') || 'guest';\r\n  const prefix = `exam_${username}_`;\r\n  const KEY_START = `${prefix}start_time`;\r\n  const KEY_CURRENT = `${prefix}current_index`;\r\n  const KEY_ANSWERS = `${prefix}answers`;\r\n  const KEY_SUBMITTED = `${prefix}submitted`;\r\n\r\n  const EXAM_DURATION_MS = 30 * 60 * 1000; // 30 minutes\r\n\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState([]);            // array of selected indices or null\r\n  const [current, setCurrent] = useState(() => {\r\n    const saved = parseInt(localStorage.getItem(KEY_CURRENT), 10);\r\n    return !isNaN(saved) && saved >= 0 ? saved : 0;\r\n  });\r\n  const [timeLeft, setTimeLeft] = useState(() => {\r\n    // We'll compute accurate remaining time from start_time on mount; start with fallback\r\n    return Math.floor(EXAM_DURATION_MS / 1000);\r\n  });\r\n  const [submitted, setSubmitted] = useState(() => localStorage.getItem(KEY_SUBMITTED) === 'true');\r\n  const [result, setResult] = useState(null);\r\n\r\n  // Helper: clear saved exam state\r\n  const clearSavedExam = () => {\r\n    localStorage.removeItem(KEY_START);\r\n    localStorage.removeItem(KEY_CURRENT);\r\n    localStorage.removeItem(KEY_ANSWERS);\r\n    localStorage.removeItem(KEY_SUBMITTED);\r\n  };\r\n\r\n  // Load questions and restore saved answers / current index and compute timeLeft from start_time\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const load = async () => {\r\n      // If already submitted (server), fetch result and bail out\r\n      try {\r\n        const r = await getResult(token);\r\n        if (r?.data?.review && mounted) {\r\n          setSubmitted(true);\r\n          setResult(r.data);\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        // ignore â€” no previous result\r\n      }\r\n\r\n      // Ensure start_time exists\r\n      let start = localStorage.getItem(KEY_START);\r\n      if (!start) {\r\n        start = Date.now().toString();\r\n        localStorage.setItem(KEY_START, start);\r\n      }\r\n      const startMs = parseInt(start, 10);\r\n      const elapsed = Date.now() - startMs;\r\n      const remaining = Math.max(Math.floor((EXAM_DURATION_MS - elapsed) / 1000), 0);\r\n      if (mounted) setTimeLeft(remaining);\r\n\r\n      // fetch questions\r\n      try {\r\n        const res = await getQuestions(token);\r\n        if (!mounted) return;\r\n        const qs = res?.data || [];\r\n        setQuestions(qs);\r\n\r\n        // restore saved answers (if present) and adapt to length\r\n        let savedAnswers = null;\r\n        try {\r\n          savedAnswers = JSON.parse(localStorage.getItem(KEY_ANSWERS));\r\n        } catch (e) {\r\n          savedAnswers = null;\r\n        }\r\n\r\n        let answersToUse;\r\n        if (Array.isArray(savedAnswers)) {\r\n          if (savedAnswers.length === qs.length) answersToUse = savedAnswers;\r\n          else if (savedAnswers.length < qs.length) answersToUse = [...savedAnswers, ...Array(qs.length - savedAnswers.length).fill(null)];\r\n          else answersToUse = savedAnswers.slice(0, qs.length);\r\n        } else {\r\n          answersToUse = Array(qs.length).fill(null);\r\n        }\r\n        setAnswers(answersToUse);\r\n\r\n        // restore current index but ensure it's in bounds\r\n        const savedIndex = parseInt(localStorage.getItem(KEY_CURRENT), 10);\r\n        if (!isNaN(savedIndex) && savedIndex >= 0 && savedIndex < qs.length) {\r\n          setCurrent(savedIndex);\r\n        } else {\r\n          setCurrent(0);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to load questions:\", err);\r\n      }\r\n    };\r\n\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [token]); // run once on mount / token change\r\n\r\n  // Persist answers and current index whenever they change\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(KEY_ANSWERS, JSON.stringify(answers));\r\n    } catch (e) { /* ignore storage errors */ }\r\n  }, [answers, KEY_ANSWERS]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(KEY_CURRENT, String(current));\r\n  }, [current, KEY_CURRENT]);\r\n\r\n  // Timer: compute remaining each second from start_time so refresh stays accurate\r\n  const handleAutoSubmit = useCallback(async () => {\r\n    // Double-check not already submitted\r\n    if (submitted) return;\r\n    try {\r\n      const payload = questions.map((q, i) => ({\r\n        questionId: q._id,\r\n        selectedOption: answers[i] ?? null\r\n      }));\r\n      await submitExam(payload, token);\r\n      localStorage.setItem(KEY_SUBMITTED, 'true');\r\n      clearSavedExam();\r\n      setSubmitted(true);\r\n      const r = await getResult(token);\r\n      setResult(r.data);\r\n      // navigate to results page (optional)\r\n      window.location.hash = '#/results';\r\n    } catch (err) {\r\n      console.error(\"Auto-submit error:\", err);\r\n    }\r\n  }, [questions, answers, token, submitted, KEY_SUBMITTED]);\r\n\r\n  useEffect(() => {\r\n    if (!questions.length || submitted) return;\r\n    let mounted = true;\r\n    const tick = () => {\r\n      const startS = localStorage.getItem(KEY_START);\r\n      if (!startS) return;\r\n      const startMs = parseInt(startS, 10);\r\n      const elapsed = Date.now() - startMs;\r\n      const remaining = Math.max(Math.floor((EXAM_DURATION_MS - elapsed) / 1000), 0);\r\n      if (!mounted) return;\r\n      setTimeLeft(remaining);\r\n      if (remaining <= 0) {\r\n        handleAutoSubmit();\r\n      }\r\n    };\r\n    tick(); // run immediately\r\n    const id = setInterval(tick, 1000);\r\n    return () => { mounted = false; clearInterval(id); };\r\n  }, [questions.length, submitted, handleAutoSubmit]);\r\n\r\n  // Option click\r\n  const handleOption = idx => {\r\n    const newAnswers = Array.from(answers);\r\n    newAnswers[current] = idx;\r\n    setAnswers(newAnswers);\r\n  };\r\n\r\n  // Manual submit\r\n  const handleSubmit = useCallback(async () => {\r\n    if (submitted) return;\r\n    try {\r\n      const payload = questions.map((q, i) => ({\r\n        questionId: q._id,\r\n        selectedOption: answers[i] ?? null\r\n      }));\r\n      await submitExam(payload, token);\r\n      localStorage.setItem(KEY_SUBMITTED, 'true');\r\n      clearSavedExam();\r\n      setSubmitted(true);\r\n      const r = await getResult(token);\r\n      setResult(r.data);\r\n      window.location.hash = '#/results';\r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n    }\r\n  }, [questions, answers, token, submitted]);\r\n\r\n  // If already submitted & we have result -> show result block\r\n  if (submitted && result) {\r\n    const total = result.review?.length || 0;\r\n    const correct = result.review?.filter(q => q.correct === q.selected).length || 0;\r\n    const wrong = total - correct;\r\n    const percent = total ? Math.round((correct / total) * 100) : 0;\r\n\r\n    return (\r\n      <div className=\"result-container card\">\r\n        <h2>Exam Submitted</h2>\r\n\r\n        <div style={{ fontSize: '1.2em', margin: '12px 0', display: 'flex', justifyContent: 'space-between', maxWidth: 420 }}>\r\n          <div><strong>Score:</strong> {result.score} / {total}</div>\r\n          <div><strong>Percentage:</strong> {percent}%</div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', gap: 20, marginBottom: 12 }}>\r\n          <div style={{ color: '#43cea2', fontWeight: 'bold' }}><strong>Correct:</strong> {correct}</div>\r\n          <div style={{ color: '#d32f2f', fontWeight: 'bold' }}><strong>Wrong:</strong> {wrong}</div>\r\n        </div>\r\n\r\n        <div>Submitted At: {new Date(result.submittedAt).toLocaleString()}</div>\r\n\r\n        <h3 style={{ marginTop: 24 }}>Review Your Answers</h3>\r\n        <div style={{ textAlign: 'left', margin: '0 auto', maxWidth: 700 }}>\r\n          {result.review?.map((qItem, idx) => {\r\n            const isCorrect = qItem.correct === qItem.selected;\r\n            return (\r\n              <div key={idx} style={{\r\n                marginBottom: 24, padding: 16, borderRadius: 10, background: '#f7f7fa',\r\n                boxShadow: '0 2px 8px rgba(0,0,0,0.04)'\r\n              }}>\r\n                <div style={{ fontWeight: 600, marginBottom: 8 }}>{idx + 1}. {qItem.question}</div>\r\n                <div style={{ marginBottom: 8 }}>\r\n                  <span style={{ color: isCorrect ? '#43cea2' : '#d32f2f', fontWeight: 600 }}>\r\n                    {isCorrect ? 'Correct' : 'Wrong'}\r\n                  </span>\r\n                </div>\r\n                <ul style={{ listStyle: 'none', padding: 0 }}>\r\n                  {qItem.options.map((opt, i) => (\r\n                    <li key={i} style={{\r\n                      padding: '8px 12px',\r\n                      margin: '6px 0',\r\n                      border: '2px solid',\r\n                      borderColor: qItem.correct === i ? '#43cea2' : (qItem.selected === i ? '#d32f2f' : '#ccc'),\r\n                      borderRadius: 6,\r\n                      backgroundColor: qItem.correct === i ? '#e8f5e9' : (qItem.selected === i && qItem.correct !== i ? '#ffebee' : '#fff'),\r\n                      fontWeight: qItem.correct === i || qItem.selected === i ? 600 : 400\r\n                    }}>\r\n                      {String.fromCharCode(65 + i)}. {opt}\r\n                      {qItem.correct === i ? ' (Correct)' : ''}\r\n                      {qItem.selected === i && qItem.correct !== i ? ' (Your answer)' : ''}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <button onClick={() => window.location.hash = '#/dashboard'} style={{\r\n          padding: '10px 16px', background: '#43cea2', color: '#fff', border: 'none', borderRadius: 6, cursor: 'pointer'\r\n        }}>Return to Dashboard</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loading\r\n  if (!questions.length) {\r\n    return (\r\n      <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>\r\n        <h2>Loading questions...</h2>\r\n        <p style={{ marginTop: 12 }}>Preparing your examâ€¦</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render current exam question\r\n  const q = questions[current];\r\n  const minutes = Math.floor(timeLeft / 60);\r\n  const seconds = timeLeft % 60;\r\n\r\n  return (\r\n    <div className=\"exam-container\">\r\n      <div className=\"exam-timer\" style={{\r\n        textAlign: 'right', fontWeight: 600, color: '#d32f2f', marginBottom: 16, fontSize: '1.2em'\r\n      }}>\r\n        Time Left: {minutes.toString().padStart(2, '0')}:{seconds.toString().padStart(2, '0')}\r\n      </div>\r\n\r\n      <h3>Question {current + 1} of {questions.length}</h3>\r\n      <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\r\n\r\n      <ul style={{ listStyle: 'none', padding: 0 }}>\r\n        {q.options.map((opt, idx) => (\r\n          <li key={idx}\r\n            onClick={() => handleOption(idx)}\r\n            style={{\r\n              padding: '10px 14px',\r\n              margin: '8px 0',\r\n              border: '2px solid',\r\n              borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\r\n              borderRadius: 8,\r\n              backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\r\n              cursor: 'pointer',\r\n              fontWeight: answers[current] === idx ? 700 : 500\r\n            }}>\r\n            <span style={{ fontWeight: 800, marginRight: 8 }}>{String.fromCharCode(65 + idx)}.</span> {opt}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <div style={{ display: 'flex', gap: 12, marginTop: 18 }}>\r\n        <button disabled={current === 0} onClick={() => setCurrent(c => Math.max(0, c - 1))}>Previous</button>\r\n        <button disabled={current === questions.length - 1} onClick={() => setCurrent(c => Math.min(questions.length - 1, c + 1))}>Next</button>\r\n        <button onClick={handleSubmit} style={{ marginLeft: 'auto', background: '#1976d2', color: '#fff', border: 'none', padding: '8px 12px', borderRadius: 6 }}>Submit Exam</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Exam;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}